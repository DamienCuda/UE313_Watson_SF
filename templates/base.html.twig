<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
        <link rel="stylesheet" href="{{ asset('assets/css/style.css') }}">
        {# Run `composer require symfony/webpack-encore-bundle` to start using Symfony UX #}
        {% block stylesheets %}
            {{ encore_entry_link_tags('app') }}
        {% endblock %}

<<<<<<< Updated upstream
        {% block javascripts %}
            {{ encore_entry_script_tags('app') }}
        {% endblock %}
    </head>
    <body>
        {% block body %}{% endblock %}
    </body>
</html>
=======
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Welcome!{% endblock %}</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
    <link rel="stylesheet" href="{{ asset('assets/css/style.css') }}">
    {# Run `composer require symfony/webpack-encore-bundle` to start using Symfony UX #}
    {% block stylesheets %}
    {{ encore_entry_link_tags('app') }}
    {% endblock %}

    {% block javascripts %}
    {{ encore_entry_script_tags('app') }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script>
        $(document).ready(function() {

            console.log('oui');

            var handlerInAction = false;

            // Get default theme colors 
            var bodyStyles = window.getComputedStyle(document.body);
            var primaryColor = bodyStyles.getPropertyValue('--color-primary');
            var primaryColorHover = bodyStyles.getPropertyValue('--color-primary-hover');
            var primaryColorActive = bodyStyles.getPropertyValue('--color-primary-active');
            var backgroundColor = bodyStyles.getPropertyValue('--color-background');
            var fontColor = bodyStyles.getPropertyValue('--color-font');
            var rowHoverColor = bodyStyles.getPropertyValue('--color-row-hover');
            var linkColor = bodyStyles.getPropertyValue('--color-link');
            var menuColor = bodyStyles.getPropertyValue('--color-menu');
            var menuHoverColor = bodyStyles.getPropertyValue('--color-menu-hover');

            // Get theme colors using cookies
            if($.cookie('colorPrimary')) {
                primaryColor = $.cookie('colorPrimary');
                document.querySelector('body').style.setProperty('--color-primary', $.cookie('colorPrimary'));
            }
            if($.cookie('colorPrimaryHover')) {
                primaryColorHover = $.cookie('colorPrimaryHover');
                document.querySelector('body').style.setProperty('--color-primary-hover', $.cookie('colorPrimaryHover'));
            }
            if($.cookie('colorPrimaryActive')) {
                primaryColorActive = $.cookie('colorPrimaryActive');
                document.querySelector('body').style.setProperty('--color-primary-active', $.cookie('colorPrimaryActive'));
            }
            if($.cookie('colorBackground')) {
                backgroundColor = $.cookie('colorBackground');
                document.querySelector('body').style.setProperty('--color-background', $.cookie('colorBackground'));
            }
            if($.cookie('colorFont')) {
                fontColor = $.cookie('colorFont');
                document.querySelector('body').style.setProperty('--color-font', $.cookie('colorFont'));
            }
            if($.cookie('colorRowHover')) {
                rowHoverColor = $.cookie('colorRowHover');
                document.querySelector('body').style.setProperty('--color-row-hover', $.cookie('colorRowHover'));
            }
            if($.cookie('colorLink')) {
                linkColor = $.cookie('colorLink');
                document.querySelector('body').style.setProperty('--color-link', $.cookie('colorLink'));
            }
            if($.cookie('colorMenu')) {
                menuColor = $.cookie('colorMenu');
                document.querySelector('body').style.setProperty('--color-menu', $.cookie('colorMenu'));
            }
            if($.cookie('colorMenuHover')) {
                menuHoverColor = $.cookie('colorMenuHover');
                document.querySelector('body').style.setProperty('--color-menu-hover', $.cookie('colorMenuHover'));
            }

            $("#customizerPrimaryColor").val(primaryColor);
            $("#customizerPrimaryColorHover").val(primaryColorHover);
            $("#customizerPrimaryColorActive").val(primaryColorActive); 
            $("#customizerBackgroundColor").val(backgroundColor); 
            $("#customizerFontColor").val(fontColor); 
            $("#customizerRowHover").val(rowHoverColor); 
            $("#customizerLinkColor").val(linkColor); 
            $("#customizerMenu").val(menuColor); 
            $("#customizerMenuHover").val(menuHoverColor); 


            $('#closeCustomizer').on("click", function() {
                if(!handlerInAction)
                {
                    handlerInAction = true;
                    handleCustomizer(false);
                    setTimeout(function() { handlerInAction = false; }, 500);
                }
            });


            $('.theme-customizer.inactive').on("click", function() {
                if(!handlerInAction)
                {
                    handlerInAction = true;
                    handleCustomizer(true);
                    setTimeout(function() { handlerInAction = false; }, 500);
                }
            });




            /* COLOR PICKERS */
            $("#customizerPrimaryColor").on("change", function() {
                document.querySelector('body').style.setProperty('--color-primary', $(this).val());
                $.cookie('colorPrimary', $(this).val());
            });

            $("#customizerPrimaryColorHover").on("change", function() {
                document.querySelector('body').style.setProperty('--color-primary-hover', $(this).val());
                $.cookie('colorPrimaryHover', $(this).val());
            });

            $("#customizerPrimaryColorActive").on("change", function() {
                document.querySelector('body').style.setProperty('--color-primary-active', $(this).val());
                $.cookie('colorPrimaryActive', $(this).val());
            });

            $("#customizerBackgroundColor").on("change", function() {
                document.querySelector('body').style.setProperty('--color-background', $(this).val());
                $.cookie('colorBackground', $(this).val());
            });

            $("#customizerFontColor").on("change", function() {
                document.querySelector('body').style.setProperty('--color-font', $(this).val());
                $.cookie('colorFont', $(this).val());
            });

            $("#customizerRowHover").on("change", function() {
                document.querySelector('body').style.setProperty('--color-row-hover', $(this).val());
                $.cookie('colorRowHover', $(this).val());
            });

            $("#customizerLinkColor").on("change", function() {
                document.querySelector('body').style.setProperty('--color-link', $(this).val());
                $.cookie('colorLink', $(this).val());
            });

            $("#customizerMenu").on("change", function() {
                document.querySelector('body').style.setProperty('--color-menu', $(this).val());
                $.cookie('colorMenu', $(this).val());
            });

            $("#customizerMenuHover").on("change", function() {
                document.querySelector('body').style.setProperty('--color-menu-hover', $(this).val());
                $.cookie('colorMenuHover', $(this).val());
            });

        });




        function handleCustomizer(customizerActive) {
            if(customizerActive) {
                $(".theme-customizer").removeClass('inactive');
                $(".theme-customizer").addClass('active');
            }
            else {
                $(".theme-customizer").removeClass('active');
                $(".theme-customizer").addClass('inactive');
            }
        }
    </script>
    {% endblock %}
</head>

<body>
    {% if app.user %}
    <div class="theme-customizer inactive">
        <span class="glyphicon glyphicon-pencil inactive"></span><p class="inactive">Personnalisation</p>
    
        <div class="header active">
            <p><span class="glyphicon glyphicon-pencil"></span>&nbsp;&nbsp;Thème <span class="close" id="closeCustomizer">X</span></p>
            
            
            <div class="colors active">
                <fieldset>
                    <input type="color" class="theme-input-color" id="customizerPrimaryColor">
                    <label class="theme-label" for="customizerPrimaryColor" style="display:inline;text-indent: 10px;">Primaire</label>
                </fieldset>

                <fieldset>
                    <input type="color" class="theme-input-color" id="customizerPrimaryColorHover">
                    <label class="theme-label" for="customizerPrimaryColorHover" style="display:inline;text-indent: 10px;">Primaire (survol)</label>
                </fieldset>

                <fieldset>
                    <input type="color" class="theme-input-color" id="customizerPrimaryColorActive">
                    <label class="theme-label" for="customizerPrimaryColorActive" style="display:inline;text-indent: 10px;">Primaire (actif)</label>
                </fieldset>

                <fieldset>
                    <input type="color" class="theme-input-color" id="customizerBackgroundColor">
                    <label class="theme-label" for="customizerBackgroundColor" style="display:inline;text-indent: 10px;">Fond</label>
                </fieldset>

                <fieldset>
                    <input type="color" class="theme-input-color" id="customizerFontColor">
                    <label class="theme-label" for="customizerFontColor" style="display:inline;text-indent: 10px;">Texte</label>
                </fieldset>

                <fieldset>
                    <input type="color" class="theme-input-color" id="customizerRowHover">
                    <label class="theme-label" for="customizerRowHover" style="display:inline;text-indent: 10px;">Lignes (survol)</label>
                </fieldset>

                <fieldset>
                    <input type="color" class="theme-input-color" id="customizerLinkColor">
                    <label class="theme-label" for="customizerLinkColor" style="display:inline;text-indent: 10px;">Liens</label>
                </fieldset>

                <fieldset>
                    <input type="color" class="theme-input-color" id="customizerMenu">
                    <label class="theme-label" for="customizerMenu" style="display:inline;text-indent: 10px;">Menu (texte)</label>
                </fieldset>

                <fieldset>
                    <input type="color" class="theme-input-color" id="customizerMenuHover">
                    <label class="theme-label" for="customizerMenuHover" style="display:inline;text-indent: 10px;">Menu (texte survol/actif)</label>
                </fieldset>
                
            </div>
        </div>

    </div>
    <form action="{{ logout_path('main') }}" method="post">
        <button type="submit">Logout</button>
        <input type="hidden" name="_csrf_token" value="{{ csrf_token('logout') }}">
    </form>
    {% endif %}
    
    {% block body %}{% endblock %}
</body>
</html>
>>>>>>> Stashed changes
